<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1024">
    <title>Marzban Inbound Generator</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Vazir:wght@400;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="ico.ico">
</head>

<body onload="protocolDetails()">
    <span id="topcontents">
        <img src="logo.png" alt="logo" id="logo">
    </span>
    <div id="bodypard">
        <div id="ctext">
            <br>
            <div class="line-numbers">
                <p></p>
            </div>
            <textarea id="final" style="display: none;width: 100%" onclick="protocolDetails()"></textarea>
        </div>
        <div id="content">
            <form id="MainDetails" onchange="protocolDetails()">
                <label for="protocol">Protocol</label>
                <select name="protocol" id="protocol">
                    <option value="vless">VLESS</option>
                    <option value="vmess">VMESS</option>
                    <option value="trojan">Trojan</option>
                    <option value="shadowsocks">Shadowsocks</option>
                </select>

                <div id="transmissions">
                    <label for="transmission">Transmission</label>
                    <select name="transmission" id="transmission">
                        <option value="tcp">TCP</option>
                        <option value="ws">WS(Websocket)</option>
                        <option value="grpc">GRPC</option>
                        <option value="H2" id="H2" style="display: none;">H2</option>
                    </select>
                </div>

                <div id="NetWorks" style="display: none;">
                    <label for="NetWork">Network</label>
                    <select name="network" id="network">
                        <option value="tcpudp">TCP+UDP</option>
                        <option value="tcpS">TCP</option>
                        <option value="udpS">UDP</option>
                    </select>
                </div>

                <div id="idsecurity">
                    <label for="security">Security</label>
                    <select name="security">
                        <option value="none">none</option>
                        <option value="tls" id="tls">TLS</option>
                        <option value="reality" id="reality">Reality</option>
                    </select>
                </div>
            </form>

            <hr style="margin-top: 30px;">

            <form id="protocolDetails" style="display: none;">
                <div>
                    <label for="inboundname">✅ Inbound Name</label>
                    <input type="text" id="inboundname" value="Inbound Name" name="inboundname"
                        placeholder="نام اینباند را وارد کنید" onchange="protocolDetails()">
                    <button type="button" onclick="randomize()">Random Name</button>
                    <button type="button" onclick="actualname()" style="background-color: rgb(16, 169, 240);color: rgb(0, 0, 0);">Optimal Name</button>
                </div>

                <div>
                    <label for="port">✅ Port</label>
                    <input type="number" id="port" name="port" placeholder="e.g 2053" onchange="protocolDetails()">
                    <button type="button" onclick="randomports()">Random Port</button>
                </div>

                <div id="Tls" style="display: none;">
                    <div>
                        <label for="sni">✅ SNI</label>
                        <input type="text" id="sni" name="sni" placeholder="a.example.com" onchange="protocolDetails()">
                    </div>
                    <div>
                        <label for="pubkey">✅ Public Key</label>
                        <input type="text" id="pubkey" name="pubkey" placeholder="/root/cert/a.example.com/fullchain.pem">
                    </div>
                    <div>
                        <label for="pvkey">✅ Private Key</label>
                        <input type="text" id="pvkey" name="pvkey" placeholder="/root/cert/a.example.com/Privatekey.pem">
                    </div>
                </div>

                <div id="RealityForm" style="display: none;">
                    <div>
                        <label for="dest">✅ Destination</label>
                        <input type="text" id="dest" name="dest" placeholder="xray.com:443">
                    </div>
                    <div>
                        <label for="ServerNames">✅ Server Names</label>
                        <input type="text" id="ServerNames" name="ServerNames" placeholder="xray.com,www.xray.com">
                    </div>
                    <div>
                        <label for="ShortIds">✅ Short IDs</label>
                        <input type="text" id="ShortIds" name="ShortIds" placeholder="e.g 26c9b62c">
                        <button type="button" onclick="copyToClipboardshortID()" style="width: 150px;">ShortId Command</button>
                    </div>
                    <div id="publickeyStatus">
                        <label for="PublicKey">✅ Public Key</label>
                        <label class="switch">
                            <input type="checkbox" id="publickeyStatusOnOff" onchange="protocolDetails()">
                            <span class="slider round"></span>
                        </label>
                        <label for="publickeyStatus" style="display:-webkit-inline-box">I Have PublicKey!</label>
                    </div>
                    <div id="PublicKeyDiv" style="display: none;">
                        <input type="text" id="PublicKey" name="PublicKey" placeholder="kMxiGlQa4ubWnhX94SEifF_8CbzeY_kBaLwcMnXw20I">
                    </div>
                    <div>
                        <label for="PrivateKey">✅ Private Key</label>
                        <input type="text" id="PrivateKey" name="PrivateKey" placeholder="958omt37wmklYtS-cQHZAEADGMnml7JX6ShYQn364wk">
                    </div>
                    <div>
                        <button type="button" style="width: 220px;" onclick="copyToClipboardKeys()">Public & Private Key Command</button>
                    </div>
                </div>

                <div id="acceptProxyProtocols">
                    <hr style="margin-top: 10px;">
                    <label class="switch">
                        <input type="checkbox" id="acceptProxyProtocol" onchange="protocolDetails()">
                        <span class="slider round"></span>
                    </label>
                    <label for="acceptProxyProtocol" style="display:-webkit-inline-box">Accept Proxy Protocol</label>
                </div>

                <div id="divheader">
                    <hr style="margin-top: 10px;">
                    <label for="header">Header Type</label>
                    <select name="header" id="header" onchange="protocolDetails()">
                        <option value="None">None</option>
                        <option value="http">HTTP</option>
                    </select>

                    <div id="http_header_Fields" style="display: none;">
                        <div>
                            <label for="path">Path</label>
                            <input type="text" id="path" name="path" placeholder="/" value="/" onchange="protocolDetails()">
                        </div>
                        <div id="headerOnOffDiv">
                            <label class="switch" style="display:-webkit-inline-box">
                                <input type="checkbox" id="headerOnOff" onchange="protocolDetails()">
                                <span class="slider round"></span>
                            </label>
                            <label for="headeron" style="display:-webkit-inline-box">Request Header</label>
                        </div>
                        <div id="sarbarg">
                            <center onclick="protocolDetails()">
                                <button type="button" id="addFieldsButton">Add Header</button>
                            </center>
                            <div id="targetDiv"></div>
                            <center onclick="protocolDetails()">
                                <button type="button" id="removeFieldsButton" style="display: none;">Remove Last one</button>
                            </center>
                        </div>
                        <div id="wsheader" style="display: none;">
                            <center onclick="protocolDetails()">
                                <div>
                                    <input type="text" id="wsheaderfield" name="wsheaderfield" placeholder="xray.com">
                                </div>
                            </center>
                        </div>
                    </div>
                </div>
                <hr style="margin-top: 10px;">
                <div id="sniffingDiv" onchange="protocolDetails()">
                    <label class="switch">
                        <input type="checkbox" id="sniffing" onchange="protocolDetails()" checked>
                        <span class="slider round"></span>
                    </label>
                    <label for="sniffing" style="display:-webkit-inline-box">Sniffing</label>
                </div>

                <div id="SniffingCheckbox" onchange="protocolDetails()">
                    <table style="width: 80%; margin-left: auto; margin-right: auto;text-align: center;">
                        <tbody>
                            <tr>
                                <td style="width: 33%;"><input type="checkbox" class="group-checkbox" name="http" value="http" checked></td>
                                <td style="width: 33%;"><input type="checkbox" class="group-checkbox" name="tls" value="tls" checked></td>
                                <td style="width: 33%;"><input type="checkbox" class="group-checkbox" name="fakedns" value="fakedns"></td>
                            </tr>
                            <tr id="trtable">
                                <td style="width: 33%;">HTTP</td>
                                <td style="width: 33%;">TLS</td>
                                <td style="width: 33%;">FakeDNS</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <hr style="margin-top: 50px;background-color: aliceblue;">
                <center>
                    <input type="button" value="Copy to Clipboard!" id="sutton" onclick="protocolDetails()">
                    <input type="button" value="My YouTube Channel" id="youtube">
                    <input type="button" value="GitHub Repository" id="github" style="margin-top: 20px;">
                    <input type="button" value="Marzban (Gozargah) on Github" id="github1"
                        style="margin-top: 10px;background-color:bisque;color: black;">
                </center>
            </form>
        </div>
    </div>
    <script src="script.js"></script>
    <script>
        function copyToClipboardshortID() {
            var textToCopy = "openssl rand -hex 8";
            var tempInput = document.createElement("input");
            document.body.appendChild(tempInput);
            tempInput.setAttribute("value", textToCopy);
            tempInput.select();
            document.execCommand("copy");
            document.body.removeChild(tempInput);
            alert("متن کپی شد: " + textToCopy);
        }

        function copyToClipboardKeys() {
            var textToCopy = "docker exec marzban-marzban-1 xray x25519";
            var tempInput = document.createElement("input");
            document.body.appendChild(tempInput);
            tempInput.setAttribute("value", textToCopy);
            tempInput.select();
            document.execCommand("copy");
            document.body.removeChild(tempInput);
            alert("متن کپی شد: " + textToCopy);
        }

        function updateLineNumbers() {
            var textarea = document.getElementById('final');
            var lineNumbers = document.querySelector('.line-numbers p');

            // تنظیم متن ستون عمودی
            lineNumbers.innerHTML = "";
            for (var i = 1; i <= 55; i++) {
                lineNumbers.innerHTML += i + '<br>';
            }
        }

        // اجرای ابتدایی
        updateLineNumbers()
    </script>
</body>

</html>
